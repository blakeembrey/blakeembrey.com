<!DOCTYPE html><html class="no-js" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="viewport" content="width=device-width"><meta name="description" content="Avid software engineer who occasionally finds time to compose a few words."><title>Building a Blog with Metalsmith â€¢ Blake Embrey</title><link rel="author" href="https://google.com/+BlakeEmbrey"><link rel="alternate" href="/feed.xml" type="application/rss+xml" title="Avid software engineer who occasionally finds time to compose a few words."><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:500italic,500,300,300italic|Roboto+Mono:300,300italic,500,500italic"><link rel="stylesheet" href="/vendor/normalize/normalize-064d3ac92688c2f642f725b5a435bdb9.css"><link rel="stylesheet" href="/css/main-93fca22d0b5fa133dddf892d4f7d1c89.css"><link rel="stylesheet" href="/vendor/fontello/css/blog-embedded-5f916d8999c12b1b2c2d4347c175f5fd.css"><link rel="stylesheet" href="/vendor/rrssb/rrssb-0173fb45a689485369c248b33f352aa9.css"><link rel="canonical" href="http://blakeembrey.com/articles/2014/09/building-a-blog-with-metalsmith"></head><body class="article"><div class="wrapper cf"><div class="wrapper-border"></div><a class="icon-home back-to-home" href="/" title="Blake Embrey"></a><header class="header container"><h1 class="article-title"><a href="/articles/2014/09/building-a-blog-with-metalsmith">Building a Blog with Metalsmith</a></h1><small class="article-date"><time datetime="2014-10-04 13:15">4 October 2014</time></small><div class="article-more"></div></header><main class="container" role="main"><article class="content article"><p><a href="http://www.metalsmith.io/">Metalsmith</a> is a new addition to static site generator space, only released at the beginning of this year. It&#39;s written in JavaScript and provides an extremely simple plugin system for composing files using middleware. The fact that everything is a plugin makes it incredibly easy to understand what is happening under the hood and extend it when you need to add new functionality.</p>
<h2 id="getting-started">Getting Started</h2>
<p>For this tutorial, I converted the blog you&#39;re currently reading to Metalsmith. To start, we&#39;ll create a new project directory, then create a <code>src</code> directory inside of that. The first thing we need to save the snippet below into a <code>package.json</code>, which holds all our blog dependencies.</p>
<pre><code class="lang-json">{
  "<span class="hljs-attribute">name</span>": <span class="hljs-value"><span class="hljs-string">"example-blog"</span></span>,
  "<span class="hljs-attribute">version</span>": <span class="hljs-value"><span class="hljs-string">"0.0.0"</span></span>,
  "<span class="hljs-attribute">private</span>": <span class="hljs-value"><span class="hljs-literal">true</span></span>,
  "<span class="hljs-attribute">description</span>": <span class="hljs-value"><span class="hljs-string">"Example blog."</span></span>,
  "<span class="hljs-attribute">author</span>": <span class="hljs-value"><span class="hljs-string">"Blake Embrey"</span></span>,
  "<span class="hljs-attribute">license</span>": <span class="hljs-value"><span class="hljs-string">"MIT"</span>
</span>}
</code></pre>
<p>Now that you have a valid <code>package.json</code>, you will need to install <code>metalsmith</code> locally to get started. Execute <code>npm install metalsmith --save</code> and you&#39;ll notice it&#39;s been automatically added to the <code>package.json</code>. With that as the initial dependency, you need to create a <code>build.js</code> file with the content below.</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> metalsmith = <span class="hljs-built_in">require</span>(<span class="hljs-string">'metalsmith'</span>);

metalsmith(__dirname)
  .source(<span class="hljs-string">'src'</span>)
  .destination(<span class="hljs-string">'build'</span>)
  .build(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">err</span>) </span>{
    <span class="hljs-keyword">if</span> (err) {
      <span class="hljs-keyword">throw</span> err;
    }
  });
</code></pre>
<h2 id="adding-articles">Adding articles</h2>
<p>Now you have a working Metalsmith instance - it just doesn&#39;t do anything yet. There aren&#39;t any files in <code>src</code> and no plugins are being used to process data yet. First things first, let&#39;s create an <code>articles</code> (or <code>posts</code>, etc.) directory under <code>src</code>. This structure will a part of our url (E.g. <code>/articles/...</code>). Inside the directory you created, you need to create your first markdown file. The snippet below is a very simple article with metadata.</p>
<pre><code>---
title: Example title.
date: 2014-09-29 23:00
author: Blake Embrey
template: article.jade
---

Example content.
</code></pre><p>Nothing exciting so far. If you build the blog by executing <code>node build.js</code>, you&#39;ll see a new <code>build</code> directory with the contents copied from the <code>src</code> directory. However, if you look at your markdown article you&#39;ll notice the metadata is missing. That is because the parts between the three dashes at the beginning is YAML font-matter (a type of associated metadata). We can access metadata from within any plugin or template, and it can be added to the beginning of any file and automatically be parsed.</p>
<h2 id="processing-markdown">Processing Markdown</h2>
<p>The next step would be to add markdown processing into our build script. This will allow us to turn the all our markdown into HTML documents. To do this, we&#39;ll install the <a href="https://github.com/segmentio/metalsmith-markdown">metalsmith-markdown</a> (using <code>npm install metalsmith-markdown --save</code>). If we also want syntax highlighting of code snippets, we can use <code>highlight.js</code> (or <code>highlighter</code> which offers a simple abstraction for markdown - <code>npm install highlighter --save</code>).</p>
<pre><code class="lang-javascript.diff"><span class="diff-null"><span class="hljs-keyword">var</span> metalsmith  = <span class="hljs-built_in">require</span>(<span class="hljs-string">'metalsmith'</span>);</span>
<span class="diff-addition"><span class="hljs-keyword">var</span> markdown    = <span class="hljs-built_in">require</span>(<span class="hljs-string">'metalsmith-markdown'</span>);
<span class="hljs-keyword">var</span> highlighter = <span class="hljs-built_in">require</span>(<span class="hljs-string">'highlighter'</span>);</span>
<span class="diff-null">
metalsmith(__dirname)
  .source(<span class="hljs-string">'src'</span>)</span>
<span class="diff-addition">  .use(markdown({
    gfm: <span class="hljs-literal">true</span>,
    tables: <span class="hljs-literal">true</span>,
    highlight: highlighter()
  }))</span>
<span class="diff-null">  .destination(<span class="hljs-string">'build'</span>)</span>
</code></pre>
<p>Running your build script (<code>node build.js</code>) will now result in your markdown file becoming HTML. If you add a code block fenced by three backticks, you&#39;ll also get to see syntax highlighting automatically applied (in HTML, still need to add the CSS - consider starting with a theme from the <a href="https://highlightjs.org/static/demo/">highlight.js demo</a>).</p>
<h2 id="templates">Templates</h2>
<p>Now it&#39;s time to start making things look pretty by adding templates. Let&#39;s start out with the article template, since you already have an article to work with. Start by installing <a href="https://github.com/segmentio/metalsmith-templates">metalsmith-templates</a> (<code>npm install metalsmith-templates --save</code>) and creating a <code>templates</code> directory. Create your first template file inside the templates directory. Since I&#39;m using <a href="https://github.com/visionmedia/jade">jade</a> I&#39;ve created an <code>article.jade</code> template. Here&#39;s a simple example in Jade:</p>
<pre><code class="lang-jade">html(lang=&#39;en&#39;)
  head
    meta(charset=&#39;utf-8&#39;)
    meta(http-equiv=&#39;X-UA-Compatible&#39;, content=&#39;IE=edge,chrome=1&#39;)
    meta(name=&#39;viewport&#39;, content=&#39;width=device-width&#39;)
    title= title
  body
    h1= title
    div.timestamp= date
    article!= contents
</code></pre>
<p>With the template created, you need to include the plugin. And since I&#39;m using jade, I&#39;ll need to install <code>jade</code> using <code>npm install jade --save</code> (for Handlebars use <code>npm install handlebars --save</code> and change the engine below). Let&#39;s update our <code>build.js</code> with the code below.</p>
<pre><code class="lang-javascript.diff"><span class="diff-null"><span class="hljs-keyword">var</span> metalsmith = <span class="hljs-built_in">require</span>(<span class="hljs-string">'metalsmith'</span>);
<span class="hljs-keyword">var</span> markdown   = <span class="hljs-built_in">require</span>(<span class="hljs-string">'metalsmith-markdown'</span>);
<span class="hljs-keyword">var</span> highlight  = <span class="hljs-built_in">require</span>(<span class="hljs-string">'highlight.js'</span>);</span>
<span class="diff-addition"><span class="hljs-keyword">var</span> templates  = <span class="hljs-built_in">require</span>(<span class="hljs-string">'metalsmith-templates'</span>);</span>
<span class="diff-null">
metalsmith(__dirname)</span>
<span class="diff-chunk">@@ ... @@</span>
<span class="diff-addition">  .use(templates({
    engine: <span class="hljs-string">'jade'</span>,
    directory: <span class="hljs-string">'templates'</span>
  }))</span>
<span class="diff-null">  .destination(<span class="hljs-string">'build'</span>)</span>
</code></pre>
<p>Running <code>node build.js</code> again will give you a complete HTML file in place of our markdown file. However, if you&#39;re using a different template file you will need to update the markdown metadata. In the template file you have access to the variables such as <code>contents</code>, <code>date</code> and <code>title</code> without having to define them. This is because the metadata is coming from our inline definition and <code>contents</code> is our files content. All plugins can interact, manipulate and add to this data.</p>
<h2 id="pretty-permalinks">Pretty Permalinks</h2>
<p>You can add permalinks to your blog by using <a href="https://github.com/segmentio/metalsmith-permalinks">metalsmith-permalinks</a> (<code>npm install metalsmith-permalinks --save</code>). Although you have the option for setting a pattern to rewrite URLs, I opted to use it without any options set. This is so it&#39;ll just fix up all my paths to look cleaner anyway, and add the fancy <code>path</code> property to the files metadata.</p>
<pre><code class="lang-javascript.diff"><span class="diff-chunk">@@ ... @@</span>
<span class="diff-null"><span class="hljs-keyword">var</span> highlight  = <span class="hljs-built_in">require</span>(<span class="hljs-string">'highlight.js'</span>);
<span class="hljs-keyword">var</span> templates  = <span class="hljs-built_in">require</span>(<span class="hljs-string">'metalsmith-templates'</span>);</span>
<span class="diff-addition"><span class="hljs-keyword">var</span> permalinks = <span class="hljs-built_in">require</span>(<span class="hljs-string">'metalsmith-permalinks'</span>);</span>
<span class="diff-null">
metalsmith(__dirname)</span>
<span class="diff-chunk">@@ ... @@</span>
<span class="diff-addition">  .use(permalinks())</span>
<span class="diff-null">  .use(templates({
    engine: <span class="hljs-string">'jade'</span>,
    directory: <span class="hljs-string">'templates'</span>
  }))
  .destination(<span class="hljs-string">'build'</span>)</span>
</code></pre>
<h2 id="collections">Collections</h2>
<p>Perfect, so far we&#39;ve got nice fancy URLs and blog posts rendering. Next we&#39;ll want to group all the articles together into a collection for rendering on the homepage. This also links the posts between each other so we can do things like &quot;next&quot; and &quot;previous&quot; links. As you&#39;ve probably realised, you can install a plugin for this purpose - <a href="https://github.com/segmentio/metalsmith-collections">metalsmith-collections</a> using <code>npm install metalsmith-collections --save</code>. Once installed, add it to the <code>build.js</code>.</p>
<pre><code class="lang-javascript.diff"><span class="diff-chunk">@@ ... @@</span>
<span class="diff-null"><span class="hljs-keyword">var</span> permalinks  = <span class="hljs-built_in">require</span>(<span class="hljs-string">'metalsmith-permalinks'</span>);</span>
<span class="diff-addition"><span class="hljs-keyword">var</span> collections = <span class="hljs-built_in">require</span>(<span class="hljs-string">'metalsmith-collections'</span>);</span>
<span class="diff-null">
metalsmith(__dirname)
  .source(<span class="hljs-string">'src'</span>)</span>
<span class="diff-addition">  .use(collections({
    articles: {
      pattern: <span class="hljs-string">'articles/**/*.md'</span>,
      sortBy: <span class="hljs-string">'date'</span>,
      reverse: <span class="hljs-literal">true</span>
    }
  }))</span>
<span class="diff-chunk">@@ ... @@</span>
</code></pre>
<p>The snippet above will match all markdown files in the <code>articles</code> directory, then sort them in chronological order with the most recent one at the beginning - just like a blog. The collection itself is stored as global Metalsmith metadata under <code>collections.articles</code>. Just make sure you add the collections plugin before our templates and markdown plugins since they always run in order.</p>
<h2 id="homepage">Homepage</h2>
<p>Now that we have a collection of all our posts, let&#39;s create a homepage. Using your template engine of choice, you can add a new template file to the <code>templates</code> directory. For example, I&#39;m creating <code>index.jade</code> like below.</p>
<pre><code class="lang-jade">html(lang=&#39;en&#39;)
  head
    meta(charset=&#39;utf-8&#39;)
    meta(http-equiv=&#39;X-UA-Compatible&#39;, content=&#39;IE=edge,chrome=1&#39;)
    meta(name=&#39;viewport&#39;, content=&#39;width=device-width&#39;)
    title= &#39;Home&#39;
  body
    each article in collections.articles
      article.content-article
        header
          span.timestamp= article.date
          h2
            a(href=&#39;/&#39; + article.path)= article.title
</code></pre>
<p>Now we&#39;re talking! Let&#39;s render this template by creating an <code>index.html</code> file in the root of our <code>src</code> directory. This will simply act as metadata for rendering our template, as below.</p>
<pre><code>---
template: index.jade
---
</code></pre><p>With that complete, you can run the build again (<code>node build</code>) and stare in awe at your beautiful homepage. At this point you might want to start serving the <code>build</code> folder locally too, so I run <code>npm install -g serve</code> and then used <code>serve build</code> to view the directory.</p>
<h2 id="adding-global-metadata">Adding Global Metadata</h2>
<p>You may have noticed that it&#39;d be handy to add some generic metadata or modules to reuse in templates. I hear you, so you can install <a href="https://github.com/aymericbeaumet/metalsmith-define">metalsmith-define</a> (<code>npm install metalsmith-define</code>) for this. With that installed, you can now define global metadata anywhere in the metalsmith middleware stack.</p>
<pre><code class="lang-javascript.diff"><span class="diff-chunk">@@ ... @@</span>
<span class="diff-null"><span class="hljs-keyword">var</span> collections = <span class="hljs-built_in">require</span>(<span class="hljs-string">'metalsmith-collections'</span>);</span>
<span class="diff-addition"><span class="hljs-keyword">var</span> define      = <span class="hljs-built_in">require</span>(<span class="hljs-string">'metalsmith-define'</span>);</span>
<span class="diff-null">
metalsmith(__dirname)
  .source(<span class="hljs-string">'src'</span>)</span>
<span class="diff-addition">  .use(define({
    blog: {
      url: <span class="hljs-string">'http://blakeembrey.com'</span>,
      title: <span class="hljs-string">'Blake Embrey'</span>,
      description: <span class="hljs-string">'Hello world.'</span>
    },
    owner: {
      url: <span class="hljs-string">'http://blakeembrey.me'</span>,
      name: <span class="hljs-string">'Blake Embrey'</span>
    },
    moment: <span class="hljs-built_in">require</span>(<span class="hljs-string">'moment'</span>)
  }))</span>
<span class="diff-null">  .use(collections({
    articles: {
      pattern: <span class="hljs-string">'articles/**/*.md'</span>,
      sortBy: <span class="hljs-string">'date'</span>,
      reverse: <span class="hljs-literal">true</span>
    }
  }))</span>
<span class="diff-chunk">@@ ... @@</span>
</code></pre>
<p>With the above, I have defined some information about the blog and the owner. I also added <a href="http://momentjs.com/">moment</a> (<code>npm install moment --save</code>) because it&#39;ll be handy for formatting our dates. I might quickly go back to our article and homepages templates now and wrap our date in <code>moment(date).format(&#39;MMMM D, YYYY&#39;)</code> for prettier dates. In Handlebars, you can create a <code>formatDate</code> helper and use moment that way.</p>
<h2 id="pagination">Pagination</h2>
<p>Wow, we&#39;re nearly done already! Let&#39;s add the one thing every good blog deserves, pagination. To get started, install <a href="https://github.com/blakeembrey/metalsmith-pagination">metalsmith-pagination</a> (<code>npm install metalsmith-pagination</code>), it works with any array structure and integrates with templates. We can now delete <code>index.md</code> from the <code>src</code> directory as the plugin will generate it for us (using <code>first: &#39;index.html</code>).</p>
<pre><code class="lang-javascript.diff"><span class="diff-chunk">@@ ... @@</span>
<span class="diff-null"><span class="hljs-keyword">var</span> define      = <span class="hljs-built_in">require</span>(<span class="hljs-string">'metalsmith-define'</span>);</span>
<span class="diff-addition"><span class="hljs-keyword">var</span> pagination  = <span class="hljs-built_in">require</span>(<span class="hljs-string">'metalsmith-pagination'</span>);</span>
<span class="diff-null"></span>
<span class="diff-chunk">@@ ... @@</span>
<span class="diff-null">  .use(collections({
    articles: {
      pattern: <span class="hljs-string">'articles/**/*.md'</span>,
      sortBy: <span class="hljs-string">'date'</span>,
      reverse: <span class="hljs-literal">true</span>
    }
  }))</span>
<span class="diff-addition">  .use(pagination({
    <span class="hljs-string">'collections.articles'</span>: {
      perPage: <span class="hljs-number">5</span>,
      first: <span class="hljs-string">'index.html'</span>,
      path: <span class="hljs-string">'page/:num/index.html'</span>,
      template: <span class="hljs-string">'index.jade'</span>
    }
  }))</span>
<span class="diff-chunk">@@ ... @@</span>
</code></pre>
<p>We can set a limit of files per page, the path to all pages, an alternative first page location, and the template for rendering the files. With this defined, you&#39;ll need to make some tweaks and improvements to the <code>index.jade</code> template.</p>
<pre><code class="lang-jade.diff"><span class="diff-null">html(lang='en')
  head
    meta(charset='utf-8')
    meta(http-equiv='X-UA-Compatible', content='IE=edge,chrome=1')
    meta(name='viewport', content='width=device-width')
    title= 'Home'
  body</span>
<span class="diff-deletion">    each article in collections.articles</span>
<span class="diff-addition">    each article in pagination.files</span>
<span class="diff-null">      article.content-article
        header
          span.timestamp= moment(article.date).format('MMMM D, YYYY')
          h2
            a(href='/' + article.path)= article.title</span>
<span class="diff-addition">  nav
    if pagination.previous
      a.btn(href='/' + pagination.previous.path)
        | Newer
    if pagination.next
      a.btn(href='/' + pagination.next.path)
        | Older</span>
</code></pre>
<p>Notice that the loop has changed to iterate over <code>pagination.files</code> instead. Also &quot;next&quot; and &quot;previous&quot; buttons have been added to the homepage. For the plugin to work properly, it needs to be included after the collections plugin, but before the permalinks and templates plugins. This works because we need access to the collections metadata in the plugin, but need the generated files to have a path and content created using templates.</p>
<h2 id="article-snippets">Article Snippets</h2>
<p>Another thing that all good blogs seem to have are content snippets. For this, you&#39;ll install <a href="https://github.com/blakeembrey/metalsmith-snippet">metalsmith-snippet</a> which allows you to access a short snippet of the HTML files in templates. Let&#39;s include the plugin in the <code>build.js</code> file.</p>
<pre><code class="lang-javascript.diff"><span class="diff-chunk">@@ ... @@</span>
<span class="diff-null"><span class="hljs-keyword">var</span> paginate    = <span class="hljs-built_in">require</span>(<span class="hljs-string">'metalsmith-collections-paginate'</span>);</span>
<span class="diff-addition"><span class="hljs-keyword">var</span> snippet     = <span class="hljs-built_in">require</span>(<span class="hljs-string">'metalsmith-snippet'</span>);</span>
<span class="diff-null"></span>
<span class="diff-chunk">@@ ... @@</span>
<span class="diff-addition">  .use(snippet())</span>
<span class="diff-null">  .use(permalinks())
  .use(templates({
    engine: <span class="hljs-string">'jade'</span>,
    directory: <span class="hljs-string">'templates'</span>
  }))</span>
<span class="diff-chunk">@@ ... @@</span>
</code></pre>
<p>This will automatically generate a snippet for all the articles based on a number of characters. Make sure it comes after the markdown parsing is done though. With this enabled, we can add <code>article.snippet</code> to the homepage template and print out article summaries.</p>
<h2 id="enable-xml-feed">Enable XML Feed</h2>
<p>Next up, we will enable an XML feed for the blog. This will allow people to subscribe to the blog for new articles in feed readers. To do this, you&#39;ll need to create a template for our feed. Here&#39;s my <code>feed.jade</code> template:</p>
<pre><code class="lang-jade">doctype xml
rss(version=&#39;2.0&#39;,
    xmlns:content=&#39;http://purl.org/rss/1.0/modules/content/&#39;,
    xmlns:wfw=&#39;http://wellformedweb.org/CommentAPI/&#39;,
    xmlns:dc=&#39;http://purl.org/dc/elements/1.1/&#39;
    xmlns:atom=&#39;http://www.w3.org/2005/Atom&#39;)
  channel
    title= blog.title
    atom:link(href=blog.url + &#39;/feed.xml&#39;, rel=&#39;self&#39;, type=&#39;application/rss+xml&#39;)
    link= blog.url
    description= blog.description
    pubDate= moment(date).format(&#39;ddd, DD MMM YYYY HH:mm:ss ZZ&#39;)
    language en
    for article in collections.articles
      - var permalink = blog.url + &#39;/&#39; + article.path
      item
        title= article.title
        link= permalink
        pubDate= moment(article.date).format(&#39;ddd, DD MMM YYYY HH:mm:ss ZZ&#39;)
        guid(isPermaLink=&#39;true&#39;)= permalink
        author= article.author
        description= article.snippet
</code></pre>
<p>The snippet above is creating a new XML document. We add a bunch of metadata properties to the XML feed for describing various things, then iterate over all the articles and output each article as an XML <code>item</code>. The one new thing you might notice is the global <code>date</code> variable, which is added by <a href="https://github.com/segmentio/metalsmith-build-date">metalsmith-build-date</a> (<code>npm install metalsmith-build-date</code> and <code>.use(date())</code>). For this template to render, we will create a <code>feed.xml</code> in the <code>src</code> directory with the content below.</p>
<pre><code>---
template: feed.jade
---
</code></pre><h2 id="adding-comments">Adding Comments</h2>
<p>One important aspect of a blog is having a place for readers to leave their comments and thoughts, with the goal of continuing the discussion beyond the original article. For a static site, our comment systems are little more limited to JavaScript implementations that provide their own backend for storage. Personally, I tend to gravitate toward <a href="http://disqus.com/">disqus</a>. Let&#39;s add their snippet to the bottom of <code>article.jade</code>.</p>
<pre><code class="lang-jade">div#disqus_thread

script.
  //- Disqus code snippet
  (function() {
    var dsq = document.createElement(&#39;script&#39;); dsq.type = &#39;text/javascript&#39;; dsq.async = true;
    dsq.src = &#39;//blakeembrey.disqus.com/embed.js&#39;;
    (document.getElementsByTagName(&#39;head&#39;)[0] || document.getElementsByTagName(&#39;body&#39;)[0]).appendChild(dsq);
  })();
</code></pre>
<h2 id="deploying-to-github-pages">Deploying to Github Pages</h2>
<p>Now that we&#39;ve got our static site running, we need to find a way to distribute it to the masses. We can host it anywhere statically without any hassle, but I opted to use <a href="https://pages.github.com/">Github Pages</a>. For this to work I added a <code>CNAME</code> file to the <code>src</code> directory - this is needed for Github to allow a custom domain.</p>
<pre><code>blakeembrey.com
</code></pre><p>Next, I created a simple deploy script and added it to my <code>package.json</code>.</p>
<pre><code class="lang-json.diff"><span class="diff-null">{
  "<span class="hljs-attribute">name</span>": <span class="hljs-value"><span class="hljs-string">"example-blog"</span></span>,
  "<span class="hljs-attribute">version</span>": <span class="hljs-value"><span class="hljs-string">"0.0.0"</span></span>,
  "<span class="hljs-attribute">private</span>": <span class="hljs-value"><span class="hljs-literal">true</span></span>,
  "<span class="hljs-attribute">description</span>": <span class="hljs-value"><span class="hljs-string">"Example blog."</span></span>,</span>
<span class="diff-addition">  "<span class="hljs-attribute">scripts</span>": <span class="hljs-value">{
    "<span class="hljs-attribute">build</span>": <span class="hljs-value"><span class="hljs-string">"node build.js"</span></span>,
    "<span class="hljs-attribute">deploy</span>": <span class="hljs-value"><span class="hljs-string">"npm run build &amp;&amp; cd build &amp;&amp; git init . &amp;&amp; git add . &amp;&amp; git commit -m \"Deploy\"; git push \"git@github.com:blakeembrey/blakeembrey.com.git\" master:gh-pages --force &amp;&amp; rm -rf .git"</span>
  </span>}</span>,</span>
<span class="diff-null">  "<span class="hljs-attribute">author</span>": <span class="hljs-value"><span class="hljs-string">"Blake Embrey"</span></span>,
  "<span class="hljs-attribute">license</span>": <span class="hljs-value"><span class="hljs-string">"MIT"</span>
</span>}</span>
</code></pre>
<p>For the build script above to work for you, you&#39;ll need to change the repository (<code>blakeembrey/blakeembrey.com</code>) to your Github repository.</p>
<h2 id="extra-goodies">Extra Goodies</h2>
<p>I also implemented a couple of bonus things in this blog during development - <a href="https://github.com/esundahl/metalsmith-autoprefixer">metalsmith-autoprefixer</a> for adding browser prefixes to my CSS and <a href="https://github.com/aymericbeaumet/metalsmith-redirect">metalsmith-redirect</a> for maintaining backwards compatibility with my old URLs. Check out the <a href="http://www.metalsmith.io/">Metalsmith homepage</a> to discover more great plugins.</p>
<h2 id="live-">Live!</h2>
<p>And we&#39;re done, let&#39;s get this blog live. All we need to do now is execute <code>npm run deploy</code>, which will run the build and deploy scripts and push to Github. All code and content for this blog and article is <a href="https://github.com/blakeembrey/blakeembrey.com">open source</a>, so feel free to browse for more ideas.</p>
</article><div class="share cf"><ul class="rrssb-buttons cf"><li class="rrssb-email"><a href="mailto:?subject=Building%20a%20Blog%20with%20Metalsmith&amp;body=http%3A//blakeembrey.com/articles/2014/09/building-a-blog-with-metalsmith"><span class="rrssb-icon"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" width="28px" height="28px" viewBox="0 0 28 28" enable-background="new 0 0 28 28" xml:space="preserve"><g><path d="M20.111 26.147c-2.336 1.051-4.361 1.401-7.125 1.401c-6.462 0-12.146-4.633-12.146-12.265 c0-7.94 5.762-14.833 14.561-14.833c6.853 0 11.8 4.7 11.8 11.252c0 5.684-3.194 9.265-7.399 9.3 c-1.829 0-3.153-0.934-3.347-2.997h-0.077c-1.208 1.986-2.96 2.997-5.023 2.997c-2.532 0-4.361-1.868-4.361-5.062 c0-4.749 3.504-9.071 9.111-9.071c1.713 0 3.7 0.4 4.6 0.973l-1.169 7.203c-0.388 2.298-0.116 3.3 1 3.4 c1.673 0 3.773-2.102 3.773-6.58c0-5.061-3.27-8.994-9.303-8.994c-5.957 0-11.175 4.673-11.175 12.1 c0 6.5 4.2 10.2 10 10.201c1.986 0 4.089-0.43 5.646-1.245L20.111 26.147z M16.646 10.1 c-0.311-0.078-0.701-0.155-1.207-0.155c-2.571 0-4.595 2.53-4.595 5.529c0 1.5 0.7 2.4 1.9 2.4 c1.441 0 2.959-1.828 3.311-4.087L16.646 10.068z"></path></g></svg></span><span class="rrssb-text">email</span></a></li><li class="rrssb-facebook"><a class="popup" href="https://www.facebook.com/sharer/sharer.php?u=Building%20a%20Blog%20with%20Metalsmith"><span class="rrssb-icon"><svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="28px" height="28px" viewBox="0 0 28 28" enable-background="new 0 0 28 28" xml:space="preserve"><path d="M27.825,4.783c0-2.427-2.182-4.608-4.608-4.608H4.783c-2.422,0-4.608,2.182-4.608,4.608v18.434                c0,2.427,2.181,4.608,4.608,4.608H14V17.379h-3.379v-4.608H14v-1.795c0-3.089,2.335-5.885,5.192-5.885h3.718v4.608h-3.726                c-0.408,0-0.884,0.492-0.884,1.236v1.836h4.609v4.608h-4.609v10.446h4.916c2.422,0,4.608-2.188,4.608-4.608V4.783z"></path></svg></span><span class="rrssb-text">facebook</span></a></li><li class="rrssb-linkedin"><a class="popup" href="http://www.linkedin.com/shareArticle?mini=true&amp;url=http%3A%2F%2Fblakeembrey.com%2Farticles%2F2014%2F09%2Fbuilding-a-blog-with-metalsmith&amp;title=Building%20a%20Blog%20with%20Metalsmith"><span class="rrssb-icon"><svg id="Layer_1" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="28px" height="28px" viewbox="0 0 28 28" enable-background="new 0 0 28 28" xml:space="preserve"><path d="M25.424,15.887v8.447h-4.896v-7.882c0-1.979-0.709-3.331-2.48-3.331c-1.354,0-2.158,0.911-2.514,1.803                c-0.129,0.315-0.162,0.753-0.162,1.194v8.216h-4.899c0,0,0.066-13.349,0-14.731h4.899v2.088c-0.01,0.016-0.023,0.032-0.033,0.048                h0.033V11.69c0.65-1.002,1.812-2.435,4.414-2.435C23.008,9.254,25.424,11.361,25.424,15.887z M5.348,2.501                c-1.676,0-2.772,1.092-2.772,2.539c0,1.421,1.066,2.538,2.717,2.546h0.032c1.709,0,2.771-1.132,2.771-2.546                C8.054,3.593,7.019,2.501,5.343,2.501H5.348z M2.867,24.334h4.897V9.603H2.867V24.334z"></path></svg></span><span class="rrssb-text">linkedin</span></a></li><li class="rrssb-twitter"><a class="popup popup" href="http://twitter.com/home?status=Building%20a%20Blog%20with%20Metalsmith%20http%3A%2F%2Fblakeembrey.com%2Farticles%2F2014%2F09%2Fbuilding-a-blog-with-metalsmith"><span class="rrssb-icon"><svg id="Layer_1" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="28px" height="28px" viewbox="0 0 28 28" enable-background="new 0 0 28 28" xml:space="preserve"><path d="M24.253,8.756C24.689,17.08,18.297,24.182,9.97,24.62c-3.122,0.162-6.219-0.646-8.861-2.32                c2.703,0.179,5.376-0.648,7.508-2.321c-2.072-0.247-3.818-1.661-4.489-3.638c0.801,0.128,1.62,0.076,2.399-0.155                C4.045,15.72,2.215,13.6,2.115,11.077c0.688,0.275,1.426,0.407,2.168,0.386c-2.135-1.65-2.729-4.621-1.394-6.965                C5.575,7.816,9.54,9.84,13.803,10.071c-0.842-2.739,0.694-5.64,3.434-6.482c2.018-0.623,4.212,0.044,5.546,1.683                c1.186-0.213,2.318-0.662,3.329-1.317c-0.385,1.256-1.247,2.312-2.399,2.942c1.048-0.106,2.069-0.394,3.019-0.851                C26.275,7.229,25.39,8.196,24.253,8.756z"></path></svg></span><span class="rrssb-text">twitter</span></a></li><li class="rrssb-reddit"><a class="popup" href="http://www.reddit.com/submit?url=http%3A%2F%2Fblakeembrey.com%2Farticles%2F2014%2F09%2Fbuilding-a-blog-with-metalsmith"><span class="rrssb-icon"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" width="28px" height="28px" viewbox="0 0 28 28" enable-background="new 0 0 28 28" xml:space="preserve"><g><path d="M11.794 15.316c0-1.029-0.835-1.895-1.866-1.895c-1.03 0-1.893 0.865-1.893 1.895s0.863 1.9 1.9 1.9 C10.958 17.2 11.8 16.3 11.8 15.316z"></path><path d="M18.1 13.422c-1.029 0-1.895 0.864-1.895 1.895c0 1 0.9 1.9 1.9 1.865c1.031 0 1.869-0.836 1.869-1.865 C19.969 14.3 19.1 13.4 18.1 13.422z"></path><path d="M17.527 19.791c-0.678 0.678-1.826 1.006-3.514 1.006c-0.004 0-0.009 0-0.014 0c-0.004 0-0.01 0-0.015 0 c-1.686 0-2.834-0.328-3.51-1.005c-0.264-0.265-0.693-0.265-0.958 0c-0.264 0.265-0.264 0.7 0 1 c0.943 0.9 2.4 1.4 4.5 1.402c0.005 0 0 0 0 0c0.005 0 0 0 0 0c2.066 0 3.527-0.459 4.47-1.402 c0.265-0.264 0.265-0.693 0.002-0.958C18.221 19.5 17.8 19.5 17.5 19.791z"></path><path d="M27.707 13.267c0-1.785-1.453-3.237-3.236-3.237c-0.793 0-1.518 0.287-2.082 0.761c-2.039-1.295-4.646-2.069-7.438-2.219 l1.483-4.691l4.062 0.956c0.071 1.4 1.3 2.6 2.7 2.555c1.488 0 2.695-1.208 2.695-2.695C25.881 3.2 24.7 2 23.2 2 c-1.059 0-1.979 0.616-2.42 1.508l-4.633-1.091c-0.344-0.081-0.693 0.118-0.803 0.455l-1.793 5.7 C10.548 8.6 7.7 9.4 5.6 10.75C5.006 10.3 4.3 10 3.5 10.029c-1.785 0-3.237 1.452-3.237 3.2 c0 1.1 0.6 2.1 1.4 2.69c-0.04 0.272-0.061 0.551-0.061 0.831c0 2.3 1.3 4.4 3.7 5.9 c2.299 1.5 5.3 2.3 8.6 2.325c3.228 0 6.271-0.825 8.571-2.325c2.387-1.56 3.7-3.66 3.7-5.917 c0-0.26-0.016-0.514-0.051-0.768C27.088 15.5 27.7 14.4 27.7 13.267z M23.186 3.355c0.74 0 1.3 0.6 1.3 1.3 c0 0.738-0.6 1.34-1.34 1.34s-1.342-0.602-1.342-1.34C21.844 4 22.4 3.4 23.2 3.355z M1.648 13.3 c0-1.038 0.844-1.882 1.882-1.882c0.31 0 0.6 0.1 0.9 0.209c-1.049 0.868-1.813 1.861-2.26 2.9 C1.832 14.2 1.6 13.8 1.6 13.267z M21.773 21.57c-2.082 1.357-4.863 2.105-7.831 2.105c-2.967 0-5.747-0.748-7.828-2.105 c-1.991-1.301-3.088-3-3.088-4.782c0-1.784 1.097-3.484 3.088-4.784c2.081-1.358 4.861-2.106 7.828-2.106 c2.967 0 5.7 0.7 7.8 2.106c1.99 1.3 3.1 3 3.1 4.784C24.859 18.6 23.8 20.3 21.8 21.57z M25.787 14.6 c-0.432-1.084-1.191-2.095-2.244-2.977c0.273-0.156 0.59-0.245 0.928-0.245c1.035 0 1.9 0.8 1.9 1.9 C26.354 13.8 26.1 14.3 25.8 14.605z"></path></g></svg></span><span class="rrssb-text">reddit</span></a></li><li class="rrssb-googleplus"><a class="popup popup" href="https://plus.google.com/share?url=http%3A%2F%2Fblakeembrey.com%2Farticles%2F2014%2F09%2Fbuilding-a-blog-with-metalsmith"><span class="rrssb-icon"><svg id="Layer_1" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="28px" height="28px" viewbox="0 0 28 28" enable-background="new 0 0 28 28" xml:space="preserve"><g><g><path d="M14.703,15.854l-1.219-0.948c-0.372-0.308-0.88-0.715-0.88-1.459c0-0.748,0.508-1.223,0.95-1.663                    c1.42-1.119,2.839-2.309,2.839-4.817c0-2.58-1.621-3.937-2.399-4.581h2.097l2.202-1.383h-6.67c-1.83,0-4.467,0.433-6.398,2.027                    C3.768,4.287,3.059,6.018,3.059,7.576c0,2.634,2.022,5.328,5.604,5.328c0.339,0,0.71-0.033,1.083-0.068                    c-0.167,0.408-0.336,0.748-0.336,1.324c0,1.04,0.551,1.685,1.011,2.297c-1.524,0.104-4.37,0.273-6.467,1.562                    c-1.998,1.188-2.605,2.916-2.605,4.137c0,2.512,2.358,4.84,7.289,4.84c5.822,0,8.904-3.223,8.904-6.41                    c0.008-2.327-1.359-3.489-2.829-4.731H14.703z M10.269,11.951c-2.912,0-4.231-3.765-4.231-6.037c0-0.884,0.168-1.797,0.744-2.511                    c0.543-0.679,1.489-1.12,2.372-1.12c2.807,0,4.256,3.798,4.256,6.242c0,0.612-0.067,1.694-0.845,2.478                    c-0.537,0.55-1.438,0.948-2.295,0.951V11.951z M10.302,25.609c-3.621,0-5.957-1.732-5.957-4.142c0-2.408,2.165-3.223,2.911-3.492                    c1.421-0.479,3.25-0.545,3.555-0.545c0.338,0,0.52,0,0.766,0.034c2.574,1.838,3.706,2.757,3.706,4.479                    c-0.002,2.073-1.736,3.665-4.982,3.649L10.302,25.609z"></path><polygon points="23.254,11.89 23.254,8.521 21.569,8.521 21.569,11.89 18.202,11.89 18.202,13.604 21.569,13.604 21.569,17.004                    23.254,17.004 23.254,13.604 26.653,13.604 26.653,11.89"></polygon></g></g></svg></span><span class="rrssb-text">google+</span></a></li><li class="rrssb-pocket"><a class="popup" href="https://getpocket.com/save?url=http%3A%2F%2Fblakeembrey.com%2Farticles%2F2014%2F09%2Fbuilding-a-blog-with-metalsmith"><span class="rrssb-icon"><svg width="32px" height="28px" viewbox="0 0 32 28" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns"><path d="M28.7817528,0.00172488695 C30.8117487,0.00431221738 31.9749312,1.12074529 31.9644402,3.10781507 C31.942147,6.67703739 32.1336065,10.2669583 31.8057648,13.8090137 C30.7147076,25.5813672 17.2181194,31.8996281 7.20714461,25.3808491 C2.71833574,22.4571656 0.196577202,18.3122624 0.0549495772,12.9357897 C-0.0342233715,9.5774348 0.00642900214,6.21519891 0.0300336062,2.85555035 C0.0405245414,1.1129833 1.21157517,0.0146615391 3.01995012,0.00819321302 C7.34746087,-0.00603710433 11.6775944,0.00431221738 16.0064164,0.00172488695 C20.2644248,0.00172488695 24.5237444,-0.00215610869 28.7817528,0.00172488695 L28.7817528,0.00172488695 Z M8.64885184,7.85611511 C7.38773662,7.99113854 6.66148108,8.42606978 6.29310958,9.33228474 C5.90114134,10.2969233 6.17774769,11.1421181 6.89875951,11.8276216 C9.35282156,14.161969 11.8108164,16.4924215 14.2976518,18.7943114 C15.3844131,19.7966007 16.5354102,19.7836177 17.6116843,18.7813283 C20.0185529,16.5495467 22.4070683,14.2982907 24.7824746,12.0327533 C25.9845979,10.8850542 26.1012707,9.56468083 25.1469132,8.60653379 C24.1361858,7.59255976 22.8449191,7.6743528 21.5890476,8.85191291 C19.9936451,10.3488554 18.3680912,11.8172352 16.8395462,13.3777945 C16.1342655,14.093159 15.7200114,14.0048744 15.0566806,13.3440386 C13.4599671,11.7484252 11.8081945,10.2060421 10.1262706,8.70001155 C9.65564653,8.27936164 9.00411403,8.05345704 8.64885184,7.85611511 L8.64885184,7.85611511 L8.64885184,7.85611511 Z"></path></svg></span><span class="rrssb-text">pocket</span></a></li></ul></div></main><a class="banner-github" href="https://github.com/blakeembrey/blakeembrey.com">Star on Github</a></div><footer class="footer" role="contentinfo"><a class="icon-home back-to-home" href="/" title="Blake Embrey"></a><p class="content container">2016&nbsp;&copy;&nbsp;<a href="http://blakeembrey.me">Blake Embrey</a></p></footer><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-22855713-2', 'auto');
ga('require', 'displayfeatures');
ga('send', 'pageview');
</script><script src="/vendor/jquery/jquery.min-7f859d45533c07b05ba663db3fd9607c.js"></script><script src="/vendor/rrssb/rrssb.min-f264e77a57ab1121aced0b82139abe96.js"></script></body></html>