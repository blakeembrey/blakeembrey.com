<!DOCTYPE html>
 <html lang="en" prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article#"><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><title data-react-helmet="true">A Variadic Utility in JavaScript • Blake Embrey</title><meta data-react-helmet="true" name="og:type" content="article"/><meta data-react-helmet="true" name="og:title" content="A Variadic Utility in JavaScript"/><meta data-react-helmet="true" name="og:site_name" content="Blake Embrey"/><meta data-react-helmet="true" name="og:url" content="http://blakeembrey.com/articles/2013/12/javascript-variadic-function/"/><meta data-react-helmet="true" name="description" content="A variadic function is a type of function which accepts a variable number of arguments. In JavaScript, every function can be variadic and it’s commonplace to see snippets of code using Array.prototype.slice.call(arguments,…"/><meta data-react-helmet="true" name="og:description" content="A variadic function is a type of function which accepts a variable number of arguments. In JavaScript, every function can be variadic and it’s commonplace to see snippets of code using Array.prototype.slice.call(arguments,…"/><meta data-react-helmet="true" name="article:published_time" content="2013-12-30T04:00:00.000Z"/><meta data-react-helmet="true" name="twitter:site" content="@blakeembrey"/><style data-react-free-style="true">::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}[type="checkbox"],[type="radio"]{box-sizing:border-box;padding:0}[type="number"]::-webkit-inner-spin-button,[type="number"]::-webkit-outer-spin-button{height:auto}[type="search"]{-webkit-appearance:textfield;outline-offset:-2px}[type="search"]::-webkit-search-cancel-button,[type="search"]::-webkit-search-decoration{-webkit-appearance:none}a{-webkit-text-decoration-skip:objects;background-color:transparent}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}audio:not([controls]){display:none;height:0}b,strong{font-weight:inherit;font-weight:bolder}button,html [type="button"], [type="reset"],[type="submit"]{-webkit-appearance:button}button,input{overflow:visible}button,input,optgroup,select,textarea{margin:0}button,select{text-transform:none}button:-moz-focusring,[type="button"]:-moz-focusring,[type="reset"]:-moz-focusring,[type="submit"]:-moz-focusring{outline:1px dotted ButtonText}button::-moz-focus-inner,[type="button"]::-moz-focus-inner,[type="reset"]::-moz-focus-inner,[type="submit"]::-moz-focus-inner{border-style:none;padding:0}audio,video,canvas{display:inline-block}dfn{font-style:italic}article,aside,footer,header,nav,section,details,menu,figcaption,figure,main{display:block}figure{margin:1em 40px}h1{font-size:2em;margin:0.67em 0}hr{box-sizing:content-box;height:0;overflow:visible}html{-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;line-height:1.15}img{border-style:none}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}mark{background-color:#ff0;color:#000}code,kbd,samp,pre{font-family:monospace, monospace;font-size:1em}progress{display:inline-block;vertical-align:baseline}small{font-size:80%}sub{bottom:-0.25em}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}summary{display:list-item}sup{top:-0.5em}svg:not(:root){overflow:hidden}[hidden],template{display:none}textarea{overflow:auto}*{box-sizing:border-box}.hljs-addition{background:#dfd}.hljs-attribute,.hljs-variable,.hljs-body{color:#008080}.hljs-change{background:#0086b3}.hljs-class .hljs-title,.hljs-type,.hljs-literal,.hljs-command{color:#458;font-weight:500}.hljs-deletion{background:#fdd}.hljs-header,.hljs-comment,.hljs-javadoc{color:#969896}.hljs-keyword,.hljs-winutils,.hljs-subst,.hljs-request,.hljs-status{color:#a71d5d}.hljs-built_in,.hljs-number,.hljs-hexcolor,.hljs-constant{color:#0086b3}.hljs-preprocessor,.hljs-pragma,.hljs-pi,.hljs-doctype,.hljs-shebang,.hljs-cdata{color:#999;font-weight:500}.hljs-regexp{color:#009926}.hljs-string,.hljs-tag .hljs-value,.hljs-phpdoc,.hljs-dartdoc,.hljs-formula{color:#df5000}.hljs-symbol,.hljs-symbol .hljs-string,.hljs-special,.hljs-prompt{color:#990073}.hljs-tag,.hljs-tag .hljs-title,.hljs-rules .hljs-property{color:#000080}.hljs-title,.hljs-id,.hljs-preprocessor{color:#795da3}a{border-bottom:2px solid #dcdcdc;color:#111;text-decoration:none}a:hover{border-bottom-color:#f20}body{color:#111;font-family:sans-serif;font-size:17px;font-weight:300;line-height:1.7;margin:0}pre .diff-addition{background-color:#dfd}.hljs-chunk,pre .diff-chunk{color:#aaa}pre .diff-deletion{background-color:#fdd}.f1evzss3{border-top:4px solid #f20}.fsclf6o{margin:0 auto;max-width:640px;padding:20px}.f5tm013{margin:0;padding:30px 0}.f5tm013 > li{display:inline-block;list-style:none;margin-right:20px}.f5qoj4b{border-bottom-color:transparent;color:#333}.f13o7dmr h1, h2, h3, h4, h5, h6{font-weight:500}.f13o7dmr h1{font-size:1.7em}.f13o7dmr h2{font-size:1.3em}.f13o7dmr h3{font-size:1.1em}.f13o7dmr hr{border-bottom:1px dashed #fff;border-top:1px dashed #aaa;display:block;margin:1.5em 0}.f13o7dmr blockquote{border-left:4px solid #f20;margin:1em 0;padding-left:1em}.f13o7dmr img,audio,embed,video,object{height:auto;max-width:100%}.f13o7dmr code, pre{background-color:#f3f3f3;border:1px solid #ccc;color:#111;font-family:monospace;font-size:0.9em}.f13o7dmr pre{line-height:1.3;overflow-x:auto;padding:0.6em 0.8em}.f13o7dmr code{border-color:#ccc;display:inline;padding:0 0.3em;white-space:pre-line;word-wrap:break-word}.f13o7dmr pre > code{background-color:transparent;border:none;font-size:100%;padding:0;white-space:pre;word-wrap:normal}.f13o7dmr a:hover > code{border-color:#f20}.f1ymzfbz{color:#777;font-size:0.85em;margin:1.5em 0;padding:0}.f1ymzfbz > li > a{color:#777}.f1ymzfbz > li{display:inline-block;list-style:none;padding-right:20px}</style></head><body><div id="react-mount"><div data-reactroot="" data-reactid="1" data-react-checksum="-1731631264"><!-- react-empty: 2 --><div class="f1evzss3" data-reactid="3"></div><div class="fsclf6o" data-reactid="4"><ul class="f5tm013" data-reactid="5"><li data-reactid="6"><a class="f5qoj4b" href="/" data-reactid="7">Writing</a></li><li data-reactid="8"><a class="f5qoj4b" href="http://blakeembrey.me" data-reactid="9">About</a></li><li data-reactid="10"><a class="f5qoj4b" href="/rss.xml" data-reactid="11">RSS</a></li></ul><div class="f13o7dmr" data-reactid="12"><div data-reactid="13"><!-- react-empty: 14 --><h1 data-reactid="15">A Variadic Utility in JavaScript</h1><ul class="f1ymzfbz" data-reactid="16"><li data-reactid="17"><!-- react-text: 18 -->Written<!-- /react-text --><!-- react-text: 19 --> <!-- /react-text --><time datetime="2013-12-30T04:00:00.000Z" data-reactid="20">29 December 2013</time></li><li data-reactid="21"><a href="https://github.com/blakeembrey/variadic" data-reactid="22">View on GitHub</a></li><li data-reactid="23"><a href="http://npmjs.org/package/variadic" data-reactid="24">Install with NPM</a></li></ul><div data-reactid="25"><p>A variadic function is a type of function which accepts a variable number of arguments. In JavaScript, every function can be variadic and it’s commonplace to see snippets of code using <code>Array.prototype.slice.call(arguments, 1)</code> to get a unlimited number of trailing arguments back as an array. You can also find many instances where you would even slice all the arguments, for the sake of manipulation and array concatenation.</p>
<p>The ability to get all the functions trailing arguments natively would be a great inclusion to the language, and in fact <a href="http://ariya.ofilabs.com/2013/03/es6-and-rest-parameter.html">it’s already in the works with ES6</a>. For now though, we could be stuck typing this out manually. Or we can write ourselves a <a href="https://github.com/blakeembrey/variadic">little utility function</a> to speed up our workflow.</p>
<pre><code class="language-javascript"><span class="hljs-keyword">var</span> slice = <span class="hljs-built_in">Array</span>.prototype.slice;

<span class="hljs-comment">/**
 * Generate a function that accepts a variable number of arguments as the last
 * function argument.
 *
 * @param  {Function} fn
 * @return {Function}
 */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">variadic</span> (<span class="hljs-params">fn</span>) </span>{
  <span class="hljs-keyword">var</span> count = <span class="hljs-built_in">Math</span>.max(fn.length - <span class="hljs-number">1</span>, <span class="hljs-number">0</span>);

  <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> args = slice.call(<span class="hljs-built_in">arguments</span>, <span class="hljs-number">0</span>, count);

    <span class="hljs-comment">// Enforce the array length, in case we don't have enough array padding.</span>
    args.length = count;
    args.push(slice.call(<span class="hljs-built_in">arguments</span>, count));

    <span class="hljs-keyword">return</span> fn.apply(<span class="hljs-keyword">this</span>, args);
  };
};
</code></pre>
<p>The snippet above accepts a single function as its argument and returns a new function that will pass in every additional argument as an array to the last parameter.</p>
<pre><code class="language-javascript"><span class="hljs-keyword">var</span> fn = variadic(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">args</span>) </span>{
  <span class="hljs-keyword">return</span> args;
});

fn(); <span class="hljs-comment">//=&gt; []</span>
fn(<span class="hljs-string">'a'</span>); <span class="hljs-comment">//=&gt; ['a']</span>
fn(<span class="hljs-string">'a'</span>, <span class="hljs-string">'b'</span>) <span class="hljs-comment">//=&gt; ['a', 'b'];</span>

<span class="hljs-keyword">var</span> fn = variadic(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">a, b, args</span>) </span>{
  <span class="hljs-keyword">return</span> { <span class="hljs-attr">a</span>: a, <span class="hljs-attr">b</span>: b, <span class="hljs-attr">args</span>: args };
});

fn(); <span class="hljs-comment">//=&gt; { a: undefined, b: undefined, args: [] }</span>
fn(<span class="hljs-string">'a'</span>); <span class="hljs-comment">//=&gt; { a: 'a', b: undefined, args: [] }</span>
fn(<span class="hljs-string">'a'</span>, <span class="hljs-string">'b'</span>, <span class="hljs-string">'c'</span>, <span class="hljs-string">'d'</span>, <span class="hljs-string">'e'</span>); <span class="hljs-comment">//=&gt; { a: 'a', b: 'b', args: ['c', 'd', 'e'] }</span>
</code></pre>
<p>When might you use this in practice though? One example is the Backbone.js event triggering mechanism which accepts a variable number of arguments.</p>
<pre><code class="language-javascript">trigger: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">name</span>) </span>{
  <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>._events) <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
  <span class="hljs-keyword">var</span> args = slice.call(<span class="hljs-built_in">arguments</span>, <span class="hljs-number">1</span>);
  <span class="hljs-comment">// Trigger some events with the args.</span>
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
},
</code></pre>
<p>Could be rewritten to simply be:</p>
<pre><code class="language-javascript">trigger: variadic(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">name, args</span>) </span>{
  <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>._events) <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
  <span class="hljs-comment">// Trigger some events with the args.</span>
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
}),
</code></pre>
</div><hr data-reactid="26"/><p data-reactid="27"><strong data-reactid="28">Questions?</strong><!-- react-text: 29 --> <!-- /react-text --><!-- react-text: 30 -->Find me on<!-- /react-text --><!-- react-text: 31 --> <!-- /react-text --><a href="https://twitter.com/blakeembrey" data-reactid="32">Twitter</a><!-- react-text: 33 -->,<!-- /react-text --><a href="https://toot.cafe/@blakeembrey" data-reactid="34">Mastodon</a><!-- react-text: 35 --> <!-- /react-text --><!-- react-text: 36 -->or<!-- /react-text --><!-- react-text: 37 --> <!-- /react-text --><a href="https://github.com/blakeembrey/writing" data-reactid="38">my repo</a><!-- react-text: 39 -->.<!-- /react-text --></p></div></div></div></div></div><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
          (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
          })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

          ga('create', "UA-22855713-2", 'auto');
          ga('send', 'pageview');</script></body></html>